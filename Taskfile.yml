# https://taskfile.dev

version: '3'

vars:
  VERSION: v1.0.0
  COMMIT: 
    sh: git rev-parse --short HEAD
  LDFLAGS: "-X main.buildVersion={{.VERSION}} -X main.buildDate={{ now | date \"2006-01-02\" }} -X main.buildCommit={{.COMMIT}}"

tasks:
  build_cli:
    desc: Build gophkeeper cli
    cmds:
      - go build -ldflags "{{.LDFLAGS}}" ./cmd/gophkeeper/.
    silent: true
  build:
    desc: Build all
    cmds:
      - task: build_cli

